# Правильные файлы БЕЗ кавычек

Вот правильные версии всех файлов для копирования — **БЕЗ кавычек в содержимом**.

---

## 1. requirements.txt

Скопируй это содержимое (БЕЗ кавычек вокруг):

```
pyTelegramBotAPI==4.14.0
```

---

## 2. Dockerfile

Скопируй это содержимое (БЕЗ кавычек):

```
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY bot.py .

CMD ["python", "bot.py"]
```

---

## 3. bot.py

Скопируй это содержимое (БЕЗ кавычек в строках кода, только там где нужны для Python):

```python
import telebot
from telebot import types
import urllib.parse
import os

BOT_TOKEN = os.getenv('BOT_TOKEN')
WEB_APP_URL = os.getenv('WEB_APP_URL', 'https://your-app.netlify.app')

if not BOT_TOKEN:
    print("ОШИБКА: BOT_TOKEN не установлен!")
    exit(1)

bot = telebot.TeleBot(BOT_TOKEN)

@bot.message_handler(commands=['start'])
def start(message):
    bot.reply_to(message, 
                 f"Привет! Я бот для управления вишлистами.\n\n"
                 f"Отправь мне фото товара, и я помогу создать карточку желания!")

@bot.message_handler(content_types=['photo'])
def handle_photo(message):
    try:
        file_info = bot.get_file(message.photo[-1].file_id)
        file_path = file_info.file_path
        image_url = f"https://api.telegram.org/file/bot{BOT_TOKEN}/{file_path}"
        encoded_url = urllib.parse.quote(image_url, safe='')
        start_param = f"img_url_{encoded_url}"
        
        keyboard = types.InlineKeyboardMarkup()
        button = types.InlineKeyboardButton(
            text="Открыть мини-приложение",
            web_app=types.WebAppInfo(url=f"{WEB_APP_URL}?start_param={start_param}")
        )
        keyboard.add(button)
        
        bot.reply_to(message, 
                    "Отлично! Я получил фото. Нажми кнопку ниже, чтобы открыть мини-приложение и создать карточку желания.",
                    reply_markup=keyboard)
        
        try:
            bot.send_message(message.chat.id, 
                           "Открываю мини-приложение...",
                           reply_markup=types.InlineKeyboardMarkup().add(
                               types.InlineKeyboardButton(
                                   text="Открыть",
                                   web_app=types.WebAppInfo(url=f"{WEB_APP_URL}?start_param={start_param}")
                               )
                           ))
        except Exception as e:
            print(f"Ошибка при автоматическом открытии: {e}")
            
    except Exception as e:
        bot.reply_to(message, f"Ошибка при обработке фото: {str(e)}")
        print(f"Ошибка: {e}")

@bot.message_handler(func=lambda message: True)
def handle_all(message):
    bot.reply_to(message, 
                 "Отправь мне фото товара, и я помогу создать карточку желания!")

if __name__ == '__main__':
    print("Бот запущен!")
    print(f"WEB_APP_URL: {WEB_APP_URL}")
    bot.polling(none_stop=True)
```

---

## 4. runtime.txt (опционально, если используешь Nixpacks)

```
python-3.11.0
```

---

## 5. Procfile (опционально)

```
web: python bot.py
```

---

## Важно при копировании:

1. **requirements.txt** — только имя пакета, БЕЗ кавычек
2. **Dockerfile** — команды Docker, БЕЗ кавычек вокруг текста
3. **bot.py** — кавычки только внутри строк Python (для текста), НЕ вокруг всего файла

Когда копируешь код из markdown блоков (между тройными обратными кавычками), копируй только содержимое между ними, не сами кавычки.
